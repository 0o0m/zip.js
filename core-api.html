<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>zip.js</title>
<link rel="stylesheet" href="default.css">
<link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
<link href='http://fonts.googleapis.com/css?family=Maven+Pro|Muli|Istok+Web' rel='stylesheet' type='text/css'>
</head>
<body>
	<a href="http://github.com/gildas-lormeau/zip.js"><img style="position: absolute; top: 0; right: 0; border: 0;"
		src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
	<div id="container">
		<h1>
			<a href="index.html">zip.js</a> <span class="small"></span>
		</h1>

		<div class="description">
			Core API
			<hr>
		</div>
		<h2>Contents</h2>
		<ol>
			<li><a href="#io">I/O</a></li>
			<li><a href="#zip-reading">Zip reading</a></li>
			<li><a href="#zip-reading-example">Zip reading example</a></li>
			<li><a href="#zip-writing">Zip writing</a></li>
			<li><a href="#zip-writing-example">Zip writing example</a></li>
		</ol>
		<hr>
		<ol>
			<li>
				<h2 id="io">I/O</h2>
				<h3>Reader and Writer constructors</h3>
				<p>
					zip.js can handle multiple types of data thanks to a generic API.
					This feature is based on 2 abstract constructors: <code>Reader</code> and <code>Writer</code>.
				</p>
				<p>
					<code>Reader</code> constructors help to read data from a file and <code>Writer</code> constructors help to write data into a file.
					For example, if you need to read a zip and store it into a variable, you must use a <code>Reader</code> to read the compressed zip data.
					You must also use a <code>Writer</code> to write uncompressed zip data into the variable.
				</p>

				<h3>Reader constructors</h3>
				<pre><code class="prettyprint">zip.TextReader(text)</code></pre>
				<p>
					<code>string</code> reader constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>text (string)</code></dt>
					<dd>The <code>string</code> to read</dd>
				</dl>
				<br>
				<pre><code class="prettyprint">zip.BlobReader(blob)</code></pre>
				<p>
					<code>Blob</code> object reader constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>blob (Blob)</code></dt>
					<dd>The <code>Blob</code> object to read</dd>
				</dl>
				<br>
				<pre><code class="prettyprint">zip.Data64URIReader(dataURI)</code></pre>
				<p>
					Data URI reader constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>dataURI (String)</code></dt>
					<dd>The data URI to read</dd>
				</dl>
				<br>
				<pre><code class="prettyprint">zip.HttpReader(URL)</code></pre>
				<p>
					HTTP content reader constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>URL (String)</code></dt>
					<dd>The URL of the content to read</dd>
				</dl>
				<br>
				<pre><code class="prettyprint">zip.HttpRangeReader(URL)</code></pre>
				<p>
					HTTP content reader using &quot;Range&quot; request header constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>URL (String)</code></dt>
					<dd>The URL of the content to read</dd>
				</dl>

				<h3>Reader members (used internally)</h3>
				<p>Attributes:</p>
				<dl>
					<dt><code>size (number)</code></dt>
					<dd>The uncompressed data byte size</dd>
				</dl>
				<p>Methods:</p>
				<pre><code class="prettyprint">init(callback)</code></pre>
				<p>Initialize the <code>Reader</code> object.</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>callback function</dd>
				</dl>
				<pre><code class="prettyprint">readUint8Array(index, length, callback, onerror)</code></pre>
				<p>Extract a <code>UInt8Array</code> object beginning at <code>index</code> location through the specified <code>length</code>.</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>index (number)</code></dt>
					<dd>The beginning index</dd>
					<dt><code>length (number)</code></dt>
					<dd>The <code>UInt8Array</code> object length</dd>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the <code>UInt8Array</code> object as parameter</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>error callback function - optional</dd>
				</dl>
				<pre><code class="prettyprint">readBlob(index, length, callback, onerror)</code></pre>
				<p>Extract a <code>Blob</code> object beginning at <code>index</code> location through the specified <code>length</code>.</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>index (number)</code></dt>
					<dd>The beginning index</dd>
					<dt><code>length (number)</code></dt>
					<dd>The <code>Blob</code> object length</dd>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the <code>Blob</code> object as parameter</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>error callback function - optional</dd>
				</dl>

				<h3>Writer constructors</h3>
				<pre><code class="prettyprint">zip.TextWriter()</code></pre>
				<p>
					<code>string</code> writer constructor
				</p>
				<br>
				<pre><code class="prettyprint">zip.BlobWriter()</code></pre>
				<p>
					<code>Blob</code> object writer constructor
				</p>
				<br>
				<pre><code class="prettyprint">zip.FileWriter(fileEntry)</code></pre>
				<p>
					<code>File</code> object writer constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>fileEntry (FileEntry)</code>
					<dd>the <code>FileEntry</code> object used to write the <code>File</code> object</dd>
				</dl>
				<br>
				<pre><code class="prettyprint">zip.Data64URIWriter(mimeString)</code></pre>
				<p>
					Data URI writer constructor
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>mimeString (String)</code></dt>
					<dd>the data MIME type - optional</dd>
				</dl>

				<h3>Writer members (used internally)</h3>
				<p>Methods:</p>
				<pre><code class="prettyprint">init(callback)</code></pre>
				<p>Initialize the <code>Writer</code> object.</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>callback function</dd>
				</dl>
				<pre><code class="prettyprint">writeUint8Array(array, callback, onerror)</code></pre>
				<p>Write a <code>UInt8Array</code> object at the current index.</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>array (UInt8Array)</code></dt>
					<dd>The <code>UInt8Array</code> to write</dd>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>error callback function - optional</dd>
				</dl>
				<pre><code class="prettyprint">getData(callback, onerror)</code></pre>
				<p>Get written data (returned type depends on <code>Reader</code> constructor used)</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the data as parameter</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>error callback function - optional</dd>
				</dl>
			</li>
			<li>
				<h2 id="zip-reading">Zip reading</h2>
				<h3>initialization</h3>
				<pre><code class="prettyprint">zip.createReader(reader, callback, onerror)</code></pre>
				<p>
					Create a <code>ZipReader</code> object. A <code>ZipReader</code> object helps to read the zipped content.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>reader (Reader)</code></dt>
					<dd>the <code>Reader</code> object used to read input data</dd>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the new <code>ZipReader</code> object as parameter</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>global error callback function - optional</dd>
				</dl>

				<h3>Zip entries listing</h3>
				<pre><code class="prettyprint">ZipReader.prototype.getEntries(callback)</code></pre>
				<p>
					Get all entries from a zip.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>callback function returning the Array of <code>Entry</code> object as parameter</dd>
				</dl>

				<h3>Zip entry data reading</h3>
				<pre><code class="prettyprint">Entry()</code></pre>
				<p>
					Constructor representing a zip file entry.
				</p>
				<p>Attributes:</p>
				<dl>
					<dt><code>filename (String)</code></dt>
					<dd>file name</dd>
					<dt><code>directory (boolean)</code></dt>
					<dd><code>true</code> if the entry is a directory</dd>
					<dt><code>compressedSize (number)</code></dt>
					<dd>compressed data size</dd>
					<dt><code>uncompressedSize (number)</code></dt>
					<dd>uncompressed data size</dd>
					<dt><code>timeBlob (number)</code></dt>
					<dd>creation date in raw format</dd>
					<dt><code>crc32 (number)</code></dt>
					<dd>uncompressed data checksum</dd>
				</dl>
				<p>Methods:</p>
				<pre><code class="prettyprint">getData(writer, onend, onprogress)</code></pre>
				<p>
					Get the data from a file entry of the zip.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>writer (Writer)</code></dt>
					<dd><code>Writer</code> object used to write output data</dd>
					<dt><code>onend (Function)</code></dt>
					<dd>success callback function returning the output data (returned type depends on <code>Writer</code> constructor used) as parameter</dd>
					<dt><code>onprogress (Function)</code></dt>
					<dd>progress callback function returning the progress index <code>(number)</code> and a max value <code>(number)</code> as parameters - optional</dd>
				</dl>
				<h3>Zip closing</h3>
				<pre><code class="prettyprint">ZipReader.prototype.close(callback)</code></pre>
				<p>
					Close the opened zip.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function</dd>
				</dl>
			</li>
			<li>
				<h2 id="zip-reading-example">Zip reading example</h2>
				<h3>Read a zip from a Blob/File object</h3>
				<pre><code class="prettyprint">// use a BlobReader to read the zip from a Blob object
zip.createReader(new zip.BlobReader(blob), function(reader) {

  // get all entries from the zip
  reader.getEntries(function(entries) {
    if (entries.length) {

      // get first entry content as text
      entries[0].getData(new zip.TextWriter(), function(text) {
        // text contains the entry data as a String

        // close the zip reader
        reader.close(function() {
          // onclose callback
        });

      }, function(current, total) {
        // onprogress callback
      });
    }
  });
}, function(error) {
  // onerror callback
});</code></pre>
			</li>
			<li>
				<h2 id="zip-writing">Zip writing</h2>
				<h3>initialization</h3>
				<pre><code class="prettyprint">zip.createWriter(writer, callback, onerror)</code></pre>
				<p>
					Create a <code>ZipWriter</code> object.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>writer (Writer)</code></dt>
					<dd>the <code>Writer</code> object used to write output data</dd>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the new <code>ZipWriter</code> object as parameter</dd>
					<dt><code>onerror (Function)</code></dt>
					<dd>global error callback function - optional</dd>
				</dl>

				<h3>Zip entry writing</h3>
				<pre><code class="prettyprint">ZipWriter.prototype.add(name, reader, onend, onprogress, options)</code></pre>
				<p>
					Add a new entry into the zip.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>name (String)</code></dt>
					<dd>entry file name</dd>
					<dt><code>reader (Reader)</code></dt>
					<dd>the <code>Reader</code> object used to read entry data to add - optional (directory entry)</dd>
					<dt><code>onend (Function)</code></dt>
					<dd>success callback function</dd>
					<dt><code>onprogress (Function)</code></dt>
					<dd>progress callback function returning the progress index <code>(number)</code> and a max value <code>(number)</code> as parameters - optional</dd>
					<dt><code>options (Object)</code></dt>
					<dd>entry options
						<dl>
							<dt><code>directory (boolean)</code></dt>
							<dd><code>true</code> if the entry is a directory</dd>
							<dt><code>level (number)</code></dt>
							<dd>compression level from <code>0</code> to <code>9</code></dd>
						</dl>
					</dd>
				</dl>

				<h3>Zip closing</h3>
				<pre><code class="prettyprint">ZipWriter.prototype.close(callback)</code></pre>
				<p>
					Close the opened zip.
				</p>
				<p>Parameters:</p>
				<dl>
					<dt><code>callback (Function)</code></dt>
					<dd>success callback function returning the generated zip data (returned type depends on <code>Writer</code> constructor used) as parameter</dd>
				</dl>
			</li>
			<li>
				<h2 id="zip-writing-example">Zip writing example</h2>
				<h3>Write a zip into a Blob object</h3>
				<pre><code class="prettyprint">// use a BlobWriter to store the zip into a Blob object
zip.createWriter(new zip.BlobWriter(), function(writer) {

  // use a TextReader to read the String to add
  writer.add("filename.txt", new zip.TextReader("test!"), function() {
    // onsuccess callback

    // close the zip writer
    writer.close(function(blob) {
      // blob contains the zip file as a Blob object

    });
  }, function(currentIndex, totalIndex) {
    // onprogress callback
  });
}, function(error) {
  // onerror callback
});</code></pre>
			</li>
		</ol>
	</div>
	<script type="text/javascript" src="google-code-prettify/prettify.js"></script>
	<script type="text/javascript">
		prettyPrint();
	</script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15560121-15']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

	</script>
</body>
</html>
